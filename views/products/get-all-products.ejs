<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>All products</title>
  <link rel="stylesheet" href="/css/products/get-all-products.css">
</head>
<body>
  
  <%- include('../partials/header.ejs') %>

  <main class="results">
    <h1>All Products</h1>

    <% if (products && products.length > 0) { %>
      <% products.forEach(p => { %>
        <article class="product">
          <% if (p.images && p.images.length > 0) { %>
            <div class="product-images">
              <% p.images.forEach(i => { %>
                <img src="/<%= i %>" alt="Product photo" />
              <% }) %>
            </div>
          <% } %>

          <div class="product-details">
            <p><strong>Title:</strong> 
              <a href="/products/<%= p.id %>"><%= p.title %></a>
            </p>
            <p><strong>Price:</strong> <%= p.price %> â‚´</p>
            <p><strong>Description:</strong> <%= p.description %></p>
            <p>
              <strong>Created at:</strong> 
              <%= new Date(p.createdAt).toLocaleString(Intl.DateTimeFormat().resolvedOptions().locale) %>
            </p>
          </div>
        </article>
      <% }) %>
    <% } else { %>
      <p>No products found.</p>
    <% } %>
  </main>

  <%- include('../partials/sort-product.ejs') %>
  <%- include('../partials/pagination.ejs') %>

</body>
</html>
